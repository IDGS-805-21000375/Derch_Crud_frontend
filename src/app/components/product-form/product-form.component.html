<div class="card">
  <div class="card-header" [class.bg-warning]="isEditing" [class.bg-primary]="!isEditing">
    <h5 class="card-title mb-0 text-white">
      {{ isEditing ? '✏️ Editar Producto' : '➕ Nuevo Producto' }}
    </h5>
  </div>
  <div class="card-body">
    <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
      
      <div class="mb-3">
        <label for="nombre" class="form-label">Nombre</label>
        <input type="text" 
               class="form-control" 
               id="nombre"
               formControlName="nombre"
               [class.is-invalid]="nombre?.invalid && nombre?.touched"
               placeholder="Ingrese el nombre del producto">
        <div class="invalid-feedback" *ngIf="nombre?.errors?.['required']">
          El nombre es requerido
        </div>
        <div class="invalid-feedback" *ngIf="nombre?.errors?.['minlength']">
          El nombre debe tener al menos 3 caracteres
        </div>
      </div>

      <div class="mb-3">
        <label for="precio" class="form-label">Precio</label>
        <input type="number" 
               class="form-control" 
               id="precio"
               formControlName="precio"
               [class.is-invalid]="precio?.invalid && precio?.touched"
               placeholder="0.00"
               step="0.01">
        <div class="invalid-feedback" *ngIf="precio?.errors?.['required']">
          El precio es requerido
        </div>
        <div class="invalid-feedback" *ngIf="precio?.errors?.['min']">
          El precio debe ser mayor o igual a 0
        </div>
      </div>

      <div class="mb-3">
        <label for="descripcion" class="form-label">Descripción</label>
        <textarea class="form-control" 
                  id="descripcion"
                  formControlName="descripcion"
                  rows="3"
                  [class.is-invalid]="descripcion?.invalid && descripcion?.touched"
                  placeholder="Describa el producto...">
        </textarea>
        <div class="invalid-feedback" *ngIf="descripcion?.errors?.['required']">
          La descripción es requerida
        </div>
        <div class="invalid-feedback" *ngIf="descripcion?.errors?.['minlength']">
          La descripción debe tener al menos 10 caracteres
        </div>
      </div>

      <div class="d-grid gap-2">
        <button type="submit" 
                class="btn"
                [class.btn-warning]="isEditing"
                [class.btn-primary]="!isEditing"
                [disabled]="productForm.invalid || loading">
          <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
          {{ isEditing ? 'Actualizar' : 'Crear' }} Producto
        </button>
        
        <button type="button" 
                class="btn btn-secondary"
                *ngIf="isEditing"
                (click)="cancelEdit()"
                [disabled]="loading">
          Cancelar Edición
        </button>
      </div>
    </form>
  </div>
</div>